@model GesBanqueAspNet.ViewModels.PaginationViewModel

@if (Model.NbrePage > 1)
{
    <nav aria-label="Pagination">
        <ul class="pagination justify-content-end">
            @{
                int pageCourante = Model.PageEncours;
                int nbPage = Model.NbrePage;

                string url(int page)
                {
                    var dict = new Dictionary<string, object?>();
                    foreach (var kv in Model.QueryParams)
                    {
                        dict[kv.Key] = kv.Value;
                    }
                    dict["page"] = page;
                    return Url.Action(Model.ActionName, dict) ?? "#";
                }
            }

            <li class="page-item @(pageCourante <= 1 ? "disabled" : "")">
                <a class="page-link" href="@(pageCourante <= 1 ? "#" : url(pageCourante - 1))">Précédent</a>
            </li>

            @for (int i = 1; i <= nbPage; i++)
            {
                <li class="page-item @(i == pageCourante ? "active" : "")">
                    <a class="page-link" href="@url(i)">@i</a>
                </li>
            }

            <li class="page-item @(pageCourante >= nbPage ? "disabled" : "")">
                <a class="page-link" href="@(pageCourante >= nbPage ? "#" : url(pageCourante + 1))">Suivant</a>
            </li>
        </ul>
    </nav>
}
